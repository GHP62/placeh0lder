#include <stdlib.h>
#include <string.h>
#include "../include/fullRemove.h"

int main(int argc, char** argv)
{

    //nukes everything except this file when given abort command
    //966 - some shit I got to remember
    if(argc == 2)
    {
        if(!strcmp(argv[1], "abort"))
        {
            fullRemove(".\\main.exe");
            return 0;
        }
    }

    //reconstructs command given to code
    int totalLen = 13;
    for(int i = 1; i < argc; i++)totalLen += strlen(argv[i]) + 1;

    char command[totalLen];

    strcpy(command, ".\\main.exe  ");

    command[11] = (((1<<1<<1<<1<<1<<1)|1)<<1)&(((((((((((((((((((((((((((((((((((1<<1)|1)<<1<<1)|1)<<1)|1)<<1)|1)<<1<<1)|1)<<1)|1)<<1)|1)<<1<<1)|1)<<1<<1)|1)<<1<<1)|1)<<1<<1)|1)<<1)|1)<<1)|1)<<1<<1)|1)<<1)|1)<<1)|1)<<1)|1)<<1)&(((((((((((((((((((((((((((((((((1<<1)|1)<<1)|1)<<1)|1)<<1)|1)<<1<<1)|1)<<1)|1)<<1<<1)|1)<<1)|1)<<1)|1)<<1)|1)<<1<<1<<1)|1)<<1<<1<<1<<1)|1)<<1)|1)<<1)|1)<<1<<1)|1)<<1)|1)<<1)&(((((((((((((((((((((((((((((((1<<1<<1<<1)|1)<<1)|1)<<1<<1<<1)|1)<<1<<1<<1)|1)<<1<<1)|1)<<1<<1)|1)<<1)|1)<<1<<1<<1)|1)<<1)|1)<<1)|1)<<1)|1)<<1)|1)<<1)|1)<<1)|1)<<1<<1)|1)<<1)&(((((((((((((((((((((((((((((((((1<<1)|1)<<1<<1)|1)<<1)|1)<<1)|1)<<1)|1)<<1)|1)<<1)|1)<<1<<1<<1)|1)<<1<<1<<1<<1)|1)<<1)|1)<<1)|1)<<1)|1)<<1)|1)<<1)|1)<<1<<1<<1<<1)|1)<<1)|1)<<1)&(((((((((((((((((((((((((((1<<1)|1)<<1)|1)<<1)|1)<<1<<1<<1<<1)|1)<<1<<1<<1)|1)<<1)|1)<<1)|1)<<1)|1)<<1<<1<<1<<1<<1<<1)|1)<<1<<1)|1)<<1<<1)|1)<<1)|1)<<1)|1));

    for(int i = 1, j = 13; i < argc; j += strlen(argv[i]) + 1, i++)
    {
        command[j - 1] = ' ';

        strcpy(command + j, argv[i]);
    }

    command[totalLen] = 0;

    system(command);
    return 0;
}
